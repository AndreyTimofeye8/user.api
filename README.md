## User API (Тестовое задание)

#### Используемый стэк технологий:

1. Node.js
2. Express
3. MySQL, Prisma
4. jsonwebtoken, express-validator, bcrypt, http-status-codes

#### Методы API

##### 1. **POST** /user/register

**Регистрация пользователя**. Пользователь регистрируется, указывая Имя, Email, Пароль. Имя и Email валидируются - поля не должны быть пустые, имя от 3 до 20 символов, Email должен быть корректен. Email должен быть уникальным - нельзя зарегистрировать двух пользователей с одним Email. Пароли хэшируются.

##### 2. **POST** /user/login

**Аутентификация пользователя**. Аутентификация происходит при помощи Email и пароля. Email валидируется также, как в первом методе. Если Email корректный и пользователь существует в базе, то проверяется пароль и генерируется токен. Токен содержит полезную нагрузку в виде id, имени и Email. Токен существует ограниченное время.

##### 3. **PUT** /profile/[id]

**Редактирование пользователя**. Пользователь может редактировать всё, кроме id, пароля и даты регистрации: имя, фамилию, Email, пол, фото. Пользователь не может редактировать данные без токена, по токену проверяется соответствие id пользователя редактируемому профилю.

##### 4. **GET** /profile/[id]

**Получение пользователя**. Пользователь не может получить данные без токена, по токену проверяется соответствие id пользователя запрашиваемому профилю.

##### 5. **GET** /profiles?page=1

**Получение всех пользователей с пагинацией**. Получение всех пользователей невозможно без токена. Выводится 10 записей на страницу, записи отсортированы по дате регистрации по убыванию - от более ранних к более поздним регистрациям.

> Дамп базы данных находится в папке dump. В базе данных хранятся только названия файлов, файлы лежат в папке photos и раздаются статически.

#### Структура приложения

##### config

Настройки приложения

##### dump20240306

Дамп базы данных

##### modules

Модули с константами, подключением к базе данных и валидацией данных

##### photos

Фото пользователей

##### prisma

Схема базы данных

##### routes

Маршруты для обработки HTTP-запросов

##### services

Сервисы для взаимодействия с базой данных и обработки данных

##### app.js

Точка входа в приложение. Для запуска используется команда:

`node app.js`

#### Автор

[Андрей Тимофеев](https://t.me/andreu_t)
